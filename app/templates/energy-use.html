{% extends "base.html" %}

{% block title %}Energy Use Calculator{% endblock %}

{% block content %}
<div class="app-container">
    <div class="card" style="max-width: 800px; margin: 0 auto;">
        <h1>Energy Use Calculator</h1>

        {% if submitted_data %}
        <div class="metrics-row" style="margin-top: 2rem;">
            {% for key, value in submitted_data.items() %}
            <div class="card metric-card">
                <div class="metric-header">
                    <span class="metric-label">{{ key|replace('_', ' ')|title }}</span>
                    <i class="fas fa-bolt metric-icon"></i>
                </div>
                <div class="metric-value">{{ value }}</div>
            </div>
            {% endfor %}
        </div>

        <div style="margin-top: 2rem; text-align: center;">
            <a href="{{ url_for('energy_use') }}" class="hero-cta-button">Calculate Again</a>
        </div>
        {% else %}
        <form method="POST" action="">
            {{ form.hidden_tag() }}
            <div class="form-group">
                {{ form.grid_import_kwh.label(class="form-label") }}
                {{ form.grid_import_kwh(class="form-control", size=32) }}
                {% for error in form.grid_import_kwh.errors %}
                <span class="form-error">[{{ error }}]</span>
                {% endfor %}
            </div>
            <div class="form-group">
                {{ form.solar_generation_kwh.label(class="form-label") }}
                {{ form.solar_generation_kwh(class="form-control", size=32) }}
                {% for error in form.solar_generation_kwh.errors %}
                <span class="form-error">[{{ error }}]</span>
                {% endfor %}
            </div>
            <div class="form-group">
                {{ form.grid_export_kwh.label(class="form-label") }}
                {{ form.grid_export_kwh(class="form-control", size=32) }}
                {% for error in form.grid_export_kwh.errors %}
                <span class="form-error">[{{ error }}]</span>
                {% endfor %}
            </div>
            <div class="form-group">
                {{ form.ev_energy_kwh.label(class="form-label") }}
                {{ form.ev_energy_kwh(class="form-control", size=32) }}
                {% for error in form.ev_energy_kwh.errors %}
                <span class="text-danger">[{{ error }}]</span>
                {% endfor %}
            </div>
            <div class="form-group">
                {{ form.odometer_reading_km.label(class="form-label") }}
                {{ form.odometer_reading_km(class="form-control", size=32) }}
                {% for error in form.odometer_reading_km.errors %}
                <span class="text-danger">[{{ error }}]</span>
                {% endfor %}
            </div>
            <div class="form-actions">
                {{ form.submit(class="hero-cta-button") }}
            </div>
        </form>
        {% endif %}
    </div>
</div>
{% endblock %}